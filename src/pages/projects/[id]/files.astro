---
/**
 * Project File Management Page
 * Upload, browse, and manage all project files
 */
import Layout from '../../../layouts/Layout.astro';
import ProjectModuleNav from '../../../components/ProjectModuleNav.tsx';
import ProjectHeader from '../../../components/ProjectHeader.tsx';
import FileUploader from '../../../components/FileUploader.tsx';
import FileBrowser from '../../../components/FileBrowser.tsx';
import ActivityLogViewer from '../../../components/ActivityLogViewer.tsx';

export const prerender = false;

const { id } = Astro.params;
---

<Layout title="File Management - ConstructAid">
  <ProjectModuleNav projectId={id!} client:load />
  <ProjectHeader client:load projectId={id!} moduleName="Files" moduleIcon="üíæ" />

  <!-- Main Content Area with Left Margin for Sidebar -->
  <div class="min-h-screen bg-gray-50 ml-64">
    <div class="max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8">
      <!-- Page Header -->}
      <div class="mb-8">
        <h1 class="text-3xl font-bold text-gray-900 mb-2">File Management</h1>
        <p class="text-gray-600">Upload, organize, and manage all project documents</p>
      </div>

      <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
        <!-- Left Column - Upload -->
        <div>
          <FileUploader client:load projectId={id!} />

          <div class="mt-6">
            <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
              <h3 class="font-semibold text-blue-900 mb-2">üìÅ Folder Organization</h3>
              <p class="text-sm text-blue-800 mb-2">
                Files are automatically organized into folders:
              </p>
              <ul class="text-xs text-blue-700 space-y-1">
                <li>‚Ä¢ Photos - Project progress photos</li>
                <li>‚Ä¢ Daily Reports - Daily logs and reports</li>
                <li>‚Ä¢ Insurance Certificates - COI documents</li>
                <li>‚Ä¢ Contracts - Agreements and contracts</li>
                <li>‚Ä¢ Submittals - Product submittals</li>
                <li>‚Ä¢ And 10+ more categories...</li>
              </ul>
            </div>
          </div>
        </div>

        <!-- Right Column - Browser and Activity -->
        <div class="lg:col-span-2 space-y-6">
          <!-- File Browser -->
          <FileBrowser client:load projectId={id!} />

          <!-- Activity Log -->
          <ActivityLogViewer client:load projectId={id!} limit={20} />
        </div>
      </div>
    </div>
  </div>
</Layout>

<style>
  /* Ensure upload area looks good */
  input[type="file"] {
    display: none;
  }
</style>
